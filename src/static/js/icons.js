/** @type {Record<string, {hex: string; path: string; svg: string}>} */
let simpleIcons

export default {
  setup: async () => {
    // @ts-ignore
    simpleIcons = await import('https://cdn.jsdelivr.net/npm/simple-icons@15.10.0/+esm')
  },

  /** @argument {string} slug */
  get: (slug = 'docker') => {
    if (slug === 'dash') {
      return `<span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20.151 20.829c.022.132.033.33.033.594 0 .572-.11 1.067-.33 1.485-.836.044-1.683.165-2.54.363-.859.176-1.64.418-2.344.726-.374-.154-.649-.363-.825-.627-.154-.264-.23-.682-.23-1.254 0-.528.076-1.056.23-1.584-.352.66-.759 1.199-1.22 1.617-.397.484-.99.913-1.783 1.287a5.951 5.951 0 0 1-2.574.561c-2.002 0-3.586-.572-4.752-1.716-1.144-1.166-1.716-2.926-1.716-5.28 0-1.672.374-3.168 1.122-4.488.748-1.32 1.804-2.354 3.168-3.102 1.364-.748 2.937-1.122 4.72-1.122.813 0 1.616.11 2.408.33V5.352c0-.836-.165-1.419-.495-1.749-.308-.352-.968-.55-1.98-.594 0-.792.121-1.419.363-1.881 1.078 0 2.2-.11 3.366-.33 1.166-.242 1.991-.495 2.475-.759.638.242.957.825.957 1.749v16.401c0 .726.044 1.276.132 1.65.11.352.297.605.561.759.264.132.682.209 1.254.231Zm-10.098.495c.946 0 1.76-.451 2.442-1.353.682-.924 1.023-2.343 1.023-4.257v-4.356a3.512 3.512 0 0 0-1.122-.825c-.374-.198-.825-.297-1.353-.297-1.078 0-2.035.451-2.87 1.353-.815.902-1.222 2.475-1.222 4.719 0 1.54.286 2.761.858 3.663.594.902 1.342 1.353 2.244 1.353Z"/></svg></span>`
    }

    const normalizedSlug = slug.toLowerCase().replaceAll(' ', 'plus').replaceAll('+', 'plus').replaceAll('.', 'dot')
    const iconKey = `si${normalizedSlug.charAt(0).toUpperCase()}${normalizedSlug.slice(1)}`

    const icon = simpleIcons?.[iconKey] ?? simpleIcons?.siDocker

    return `<span style="fill:#${icon?.hex}">${icon?.svg ?? ''}</span>`
  },
}
